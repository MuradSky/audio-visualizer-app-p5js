import{createApp as n}from"https://unpkg.com/vue@3/dist/vue.esm-browser.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const l={data(){return{data:null,isPlay:!1,volume:0,audioPlayer:null,coverImage:null,currentPosition:0}},methods:{timeline(e){let i=setInterval(()=>{console.log("timeline"),e&&clearTimeout(i)},500)},timer(e){let i=setInterval(()=>{console.log("time"),e&&e()&&clearInterval(i)},1e3)},play(){this.isPlay||(this.timer(()=>{const e=this.audioPlayer.isLoaded();return e&&(this.audioPlayer.play(),loop()),e}),this.isPlay=!0)},pause(){this.audioPlayer.isLoaded()&&(this.audioPlayer.pause(),noLoop(),this.isPlay=!1)},next(){this.currentPosition===this.data.length-1||!this.audioPlayer.isLoaded()||(this.currentPosition+=1,this.updated(this.currentPosition))},prev(){this.currentPosition===0||!this.audioPlayer.isLoaded()||(this.currentPosition-=1,this.updated(this.currentPosition))},changeVolume(e){this.volume=e.target.value,this.audioPlayer.setVolume(this.volume/100)},updated(e){const i=this.isPlay;this.audioPlayer.stop();const s=this.data[e];this.setupP5(s),this.isPlay=!1,i&&this.play()},setupP5(e){this.audioPlayer=loadSound(e.file),this.coverImage=loadImage(e.cover),this.audioPlayer.setVolume(this.volume/100),this.coverImage.filter(BLUR,12),window.p5CoverImage=this.coverImage}},mounted(){fetch("./data.json").then(e=>e.json()).then(e=>{this.data=e}),this.volume=50},watch:{data(e){const[i]=e;this.setupP5(i)}}};window.addEventListener("p5-ready",()=>{n(l).mount("#app-root")},!1);
